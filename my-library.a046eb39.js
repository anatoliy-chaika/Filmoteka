!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o=a("eZ7d6"),i=a("2TvXO"),s=a("dyT35"),c=a("dauUa"),u=a("jGMOa"),l=a("aNvF6"),d=a("jxsHo"),f=a("hmUQ5"),m=a("6JpON");function v(e){h(e,"watch")}function g(e){h(e,"queue")}function h(e,t){return p.apply(this,arguments)}function p(){return(p=e(o)(e(i).mark((function t(n,r){var a,o,s,l,d;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.target.classList.contains("js-films-list")){t.next=2;break}return t.abrupt("return");case 2:return u.filmBoxRef.removeEventListener("click",v),u.filmBoxRef.removeEventListener("click",g),t.prev=4,a=Number(n.target.closest(".movie_card").attributes.getNamedItem("js-id").value),t.next=8,c.API.fetchById(a);case 8:if(o=t.sent){t.next=11;break}throw new Error("❌ Something go wrong, so we can`t load your film");case 11:(s=b(w(o,r),r)).show(),_(s),L(a,s,r),y(a,o,r),(l=document.querySelector(".trailer-btn")).hidden=!0,(d=o.videos.results).length>0&&(d.every((function(e){return!e.type.includes("Trailer")}))?l.hidden=!0:l.hidden=!1),l.addEventListener("click",(function(){var e=k(q(d.find((function(e){if("Trailer"===e.type)return e}))));e.show(),_(e)})),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(4),e(m).Notify.failure(t.t0.message),console.log(t.t0.message);case 27:case"end":return t.stop()}}),t,null,[[4,23]])})))).apply(this,arguments)}function b(e,t){return s.create(e,{onShow:x,onClose:function(e){"watch"==t?u.filmBoxRef.addEventListener("click",v):u.filmBoxRef.addEventListener("click",g)}})}function w(e,t){var n=e.poster_path,r=e.original_title,a=e.vote_average,o=e.vote_count,i=e.popularity,s=e.genres,c=e.overview,u="",l="";return"queue"==t?(u='<button class="movie__to-queue" type="button">Delete from Queue</button>',l='<button class="movie__watched" type="button">add to Watched</button>'):"watch"==t&&(u='<button class="movie__to-watched" type="button">Delete from Watched</button>',l='<button class="movie__queue" type="button">add to queue</button>'),'\n  <div class="modal">\n    <button class="button__modal" type="button">\n    </button>\n    <div class="movie__description-card">\n      <div class="div__movie-img" >\n        <img\n          class="movie__img"\n          src="https://image.tmdb.org/t/p/w500'.concat(n,'"\n          alt="info of movie"\n        />\n      </div>\n      <div class="movie__desc">\n        <p class="movie__title">').concat(r,'</p>\n        <table class="movie__characters">\n          <tbody class="character__table">\n            <tr>\n              <td class="character">Vote / Votes</td>\n              <td class="character__item "><span class="vote">').concat(a.toFixed(1),'</span><span class="vote__slash">/</span><span class="vote__grey">').concat(o,'</span></td>\n            </tr>\n            <tr>\n              <td class="character">Popularity</td>\n              <td class="character__item">').concat(i.toFixed(1),'</td>\n            </tr>\n            <tr>\n              <td class="character">Original Title</td>\n              <td class="character__item">').concat(r,'</td>\n            </tr>\n            <tr>\n              <td class="character">Genre</td>\n              <td class="character__item">').concat(s[0].name,'</td>\n            </tr>\n          </tbody>\n        </table>\n        <p class="movie__about">About</p>\n        <p class="movie__about-description">\n        ').concat(c,'\n        </p>\n        <ul class="button__list">\n          <li class="button__item">').concat(u,'</li>\n          <li class="button__item">').concat(l,'</li>\n        </ul>\n        <button class="trailer-btn trailer-btn--mtzero" type="button">watch trailer</button>\n      </div>\n    </div>\n  </div>')}function y(t,n,r){var a=document.querySelector(".movie__watched"),s=document.querySelector(".movie__queue"),c=function(t){t.preventDefault(),t.target.hasAttribute("js-disabled")?e(m).Notify.warning("🎬 Your film has already sucessfully been added"):(l.storage.addFilmToWatch(n),a.textContent="Moved to Watched",a.setAttribute("js-disabled",""))},u=function(t){t.preventDefault(),t.target.hasAttribute("js-disabled")?e(m).Notify.warning("🎬 Your film has already sucessfully been added"):(l.storage.addFilmToQueue(n),s.textContent="Moved to Queue",s.setAttribute("js-disabled",""))};"watch"==r?e(o)(e(i).mark((function n(){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.storage.checkQueue(t);case 2:if(!e.sent){e.next=4;break}s.textContent="Moved to Queue",s.setAttribute("js-disabled","");case 4:s.addEventListener("click",u);case 5:case"end":return e.stop()}}),n)})))():"queue"==r&&e(o)(e(i).mark((function n(){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.storage.checkWatched(t);case 2:if(!e.sent){e.next=4;break}a.textContent="Moved to Watched",a.setAttribute("js-disabled","");case 4:a.addEventListener("click",c);case 5:case"end":return e.stop()}}),n)})))()}function _(e){var t=e.element().querySelector("button"),n=function(r){r.preventDefault(),e.close(),t.removeEventListener("click",n)};t.addEventListener("click",n)}function x(e){var t=function(n){if("Escape"!==n.code)return!1;e.close(),document.removeEventListener("keydown",t)};document.addEventListener("keydown",t)}function k(e){return s.create(e,{onShow:x})}function q(e){var t=e.key;return'<iframe\n  width="1141"\n  height="641"\n  src="https://www.youtube.com/embed/'.concat(t,'"\n  frameborder="0"\n  allowfullscreen\n></iframe>\n  <button type="button" class="button__trailer--close"></button>')}function L(t,n,r){var a=document.querySelector(".movie__to-watched"),s=document.querySelector(".movie__to-queue");"watch"==r?a.addEventListener("click",(function(r){e(o)(e(i).mark((function a(){var o,s;return e(i).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.next=3,l.storage.delFilmFromWatch(t);case 3:return a.next=5,l.storage.getTwentyFromWatch();case 5:o=a.sent,(0,d.renderFilms)(o,u.filmBoxRef),s=(0,d.pagination)(l.storage.getPageWatch(),l.storage.getMaxWatch()),(0,d.renderPagination)(s,u.filmBoxRef),n.close(),0===o.length&&(document.querySelector(".pagination").innerHTML="",u.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-watch.jpg" style="width: 100%; object-fit: cover;"></div>',e(m).Notify.warning("🙈 You haven't watched films"));case 11:case"end":return a.stop()}}),a)})))()})):"queue"==r&&s.addEventListener("click",(function(r){e(o)(e(i).mark((function a(){var o,s;return e(i).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.next=3,l.storage.delFilmFromQueue(t);case 3:return a.next=5,l.storage.getTwentyFromQueue();case 5:o=a.sent,(0,d.renderFilms)(o,u.filmBoxRef),s=(0,d.pagination)(l.storage.getPageQueue(),l.storage.getMaxQueue()),(0,d.renderPagination)(s,u.filmBoxRef),n.close(),0===o.length&&(document.querySelector(".pagination").innerHTML="",u.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-queue.jpg" style="width: 100%; object-fit: cover;"></div>',e(m).Notify.warning("🗃 You haven't queued films"));case 11:case"end":return a.stop()}}),a)})))()}))}l.storage.signIn||window.location.replace("./index.html"),u.listButton.addEventListener("click",(function(t){var n=function(){document.querySelector(".js-watched").classList.toggle("buttons__style--focus"),document.querySelector(".js-queue").classList.toggle("buttons__style--focus"),u.filmBoxRef.removeEventListener("click",v),u.filmBoxRef.removeEventListener("click",g)};if(t.target.classList.contains("js-watched"))e(o)(e(i).mark((function t(){var r,a;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.spiner.start(),n(),t.next=4,l.storage.getTwentyFromWatch();case 4:if(0!==(r=t.sent).length){t.next=12;break}return u.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-watch.jpg" style="width: 100%; object-fit: cover;"></div>',e(m).Notify.warning("🙈 You haven't watched films"),f.spiner.stop(),t.abrupt("return");case 12:(0,d.renderFilms)(r,u.filmBoxRef),a=(0,d.pagination)(l.storage.getPageWatch(),l.storage.getMaxWatch()),u.filmBoxRef.setAttribute("data-id","watch-gallery"),(0,d.renderPagination)(a,u.filmBoxRef),u.filmBoxRef.addEventListener("click",v),f.spiner.stop();case 13:case"end":return t.stop()}}),t)})))();else{if(!t.target.classList.contains("js-queue"))return;e(o)(e(i).mark((function t(){var r;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.spiner.start(),n(),t.next=4,l.storage.getTwentyFromQueue();case 4:if(0!==(r=t.sent).length){t.next=12;break}return u.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-queue.jpg" style="width: 100%; object-fit: cover;"></div>',e(m).Notify.warning("🗃 You haven't queued films"),f.spiner.stop(),t.abrupt("return");case 12:(0,d.renderFilms)(r,u.filmBoxRef),l.default.then((function(){var e=(0,d.pagination)(l.storage.getPageQueue(),l.storage.getMaxQueue());u.filmBoxRef.setAttribute("data-id","queue-gallery"),(0,d.renderPagination)(e,u.filmBoxRef),u.filmBoxRef.addEventListener("click",g)})),f.spiner.stop();case 13:case"end":return t.stop()}}),t)})))()}})),document.querySelector(".js-queue").click()}();
//# sourceMappingURL=my-library.a046eb39.js.map
